<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sector Cycle Chart</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #fff; }
        .chart-container { position: relative; width: 100vw; max-width: 600px; aspect-ratio: 1; }
        canvas { width: 100% !important; height: 100% !important; }
    </style>
</head>
<body>
    <div class="chart-container">
        <canvas id="sectorCycleChart"></canvas>
    </div>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        var ctx = document.getElementById('sectorCycleChart');
        
        var bgPlugin = {
            id: 'bgPlugin',
            beforeDraw: function(chart) {
                var ctx = chart.ctx;
                var ca = chart.chartArea;
                var x = chart.scales.x;
                var y = chart.scales.y;
                var midX = x.getPixelForValue(0);
                var midY = y.getPixelForValue(0);
                
                ctx.save();
                // 北西 (回復)
                ctx.fillStyle = 'rgba(230, 247, 255, 0.4)';
                ctx.fillRect(ca.left, ca.top, midX - ca.left, midY - ca.top);
                // 北東 (好況)
                ctx.fillStyle = 'rgba(255, 240, 240, 0.4)';
                ctx.fillRect(midX, ca.top, ca.left + ca.width - midX, midY - ca.top);
                // 南東 (後退)
                ctx.fillStyle = 'rgba(255, 251, 230, 0.4)';
                ctx.fillRect(midX, midY, ca.left + ca.width - midX, ca.top + ca.height - midY);
                // 南西 (不況)
                ctx.fillStyle = 'rgba(240, 240, 240, 0.4)';
                ctx.fillRect(ca.left, midY, midX - ca.left, ca.top + ca.height - midY);
                
                // 文字設定
                ctx.font = 'bold 14px sans-serif';
                ctx.fillStyle = 'rgba(0,0,0,0.5)';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                
                ctx.fillText('回復期', (ca.left + midX)/2, (ca.top + midY)/2);
                ctx.fillText('好況期', (midX + ca.left + ca.width)/2, (ca.top + midY)/2);
                ctx.fillText('後退期', (midX + ca.left + ca.width)/2, (midY + ca.top + ca.height)/2);
                ctx.fillText('不況期', (ca.left + midX)/2, (midY + ca.top + ca.height)/2);
                ctx.restore();
            }
        };

        new Chart(ctx, {
            type: 'scatter',
            data: {
                datasets: [
                    {
                        label: '軌跡',
                        data: [{"x": -1.09, "y": 0.17}, {"x": -0.14, "y": 0.39}, {"x": -0.19, "y": -0.88}, {"x": -1.29, "y": 2.82}, {"x": -1.27, "y": 2.49}, {"x": -1.65, "y": 2.65}, {"x": -1.02, "y": 1.18}, {"x": 1.17, "y": 1.28}, {"x": 2.43, "y": -1.29}, {"x": 5.06, "y": -1.36}, {"x": -2.11, "y": -1.08}, {"x": -2.69, "y": 0.94}, {"x": -0.92, "y": 2.17}, {"x": -2.81, "y": 3.49}, {"x": 1.4, "y": 4.66}, {"x": 1.73, "y": 4.2}, {"x": 3.33, "y": 3.83}, {"x": 1.79, "y": 2.58}, {"x": 0.5, "y": 4.22}, {"x": 1.54, "y": 4.41}, {"x": 1.3, "y": 4.49}, {"x": 4.82, "y": 6.07}, {"x": 3.17, "y": 3.7}, {"x": 4.19, "y": 5.7}, {"x": 5.51, "y": 1.42}, {"x": 6.92, "y": -0.44}, {"x": 4.57, "y": 1.98}, {"x": 6.25, "y": 1.36}, {"x": 5.82, "y": 1.22}, {"x": 4.36, "y": 4.7}, {"x": 2.16, "y": 6.38}, {"x": 1.61, "y": 7.73}, {"x": 0.75, "y": 5.08}, {"x": 0.32, "y": -2.76}, {"x": 1.18, "y": -3.86}, {"x": 4.83, "y": -2.38}, {"x": 5.29, "y": -3.44}],
                        backgroundColor: 'rgba(100, 100, 100, 0.5)',
                        borderColor: 'rgba(100, 100, 100, 0.5)',
                        borderWidth: 1,
                        pointRadius: 2,
                        showLine: true,
                        order: 2
                    },
                    {
                        label: '現在',
                        data: [{"x": 3.97, "y": -3.63}],
                        backgroundColor: 'rgba(255, 0, 0, 1)',
                        pointRadius: 8,
                        pointHoverRadius: 10,
                        order: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { min: -25, max: 25, grid: {drawTicks: false}, ticks: {display: false} },
                    y: { min: -25, max: 25, grid: {drawTicks: false}, ticks: {display: false} }
                },
                plugins: { legend: {display: false}, tooltip: {enabled: false} }
            },
            plugins: [bgPlugin]
        });
    });
    </script>
</body>
</html>